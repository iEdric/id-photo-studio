# ID Photo Studio Pro - 智能证件照生成工具

> "AI 驱动的一站式证件照工坊，极简、高效、专业"
> 使用硅基流动AI进行智能背景替换和美颜处理

"本项目由阿里云ESA提供加速、计算和保护"
![本地路径](public/esa.png)

## 📖 项目简介

ID Photo Studio Pro 是一个基于先进AI技术的智能证件照生成工具！通过集成硅基流动(SiliconFlow)和OpenRouter两大AI平台，用户可以选择最适合的AI模型，将普通照片转换为专业的证件照。只需简单几步：拍照 → 选择背景 → 配置尺寸 → AI处理，即可获得高质量的证件照片。

应用采用现代化设计，支持用户灵活选择AI提供商和模型，提供极佳的用户体验和专业级的照片处理效果。

## ✨ 主要功能

### 🤖 AI 智能处理

- **智能背景替换** - AI自动识别并更换背景，支持白色、蓝色、红色和自定义颜色
- **专业美颜处理** - 自动平滑皮肤、增强眼睛、调整光线和修复瑕疵
- **智能构图** - 根据选择的尺寸自动调整人物比例和位置
- **多种AI模型** - 支持硅基流动和OpenRouter的双平台AI模型

### 🎨 自定义配置

- **灵活背景选择** - 预设三种颜色 + 自定义颜色选择器
- **标准尺寸支持** - 一寸、二寸、大二寸等标准证件照尺寸
- **自定义尺寸** - 支持任意宽高设置（毫米单位）
- **AI参数调节** - 支持硅基流动和OpenRouter双平台，灵活配置API参数

### 📱 现代化界面

- **响应式设计** - 完美适配桌面、平板和手机设备
- **毛玻璃效果** - 现代化的UI设计，带背景模糊效果
- **流畅动画** - 所有交互都有平滑的过渡动画
- **智能反馈** - 实时显示处理状态和错误提示

## 🛠️ 技术栈

- **前端框架**: React 19.2.3
- **开发语言**: TypeScript 5.8.2
- **构建工具**: Vite 6.2.0
- **样式方案**: Tailwind CSS (CDN) + 自定义CSS动画
- **AI集成**: 硅基流动(SiliconFlow) + OpenRouter API
- **状态管理**: React Hooks
- **UI组件**: Lucide React 图标库
- **响应式设计**: CSS Grid + Flexbox

## 📦 安装与运行

### 环境要求

- Node.js 18+ (推荐 20.19+ 或 22.12+)
- npm 或 yarn
- 现代浏览器（支持ES6+和Fetch API）
- 硅基流动API密钥（用于AI处理）

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run dev
```

应用将在 `http://localhost:3000` 启动

### 构建生产版本

```bash
npm run build
```

### 预览生产构建

```bash
npm run preview
```

## 🎨 项目结构

```
src/
├── App.tsx                 # 主应用组件（证件照处理界面）
├── components/
│   ├── CameraCapture.tsx   # 摄像头拍照组件
│   ├── ProcessingOverlay.tsx # 处理状态遮罩
│   └── ResultView.tsx      # 结果展示组件
├── services/
│   └── geminiService.ts    # 硅基流动AI服务集成
├── types.ts                # TypeScript 类型定义
├── constants.ts            # 应用常量（照片尺寸等）
├── translations.ts         # 多语言翻译
├── utils.ts                # 工具函数
├── main.tsx                # 应用入口
├── index.css               # 全局样式和动画
└── vite-env.d.ts           # Vite 环境类型
```

## 💡 使用指南

### 1. 配置AI参数
   - 点击"AI 配置"按钮展开设置面板
   - 输入您的硅基流动API密钥
   - 选择合适的AI模型（推荐Qwen2-VL-72B）
   - Base URL通常无需修改

### 2. 拍摄照片
   - 允许浏览器访问摄像头权限
   - 调整姿势，确保面部清晰可见
   - 点击拍照按钮捕获图像
   - 系统会自动开始AI处理

### 3. 选择背景颜色
   - 从预设颜色中选择：白色、蓝色、红色
   - 或使用自定义颜色选择器选择任意颜色
   - AI会智能地将原背景替换为选择的颜色

### 4. 设置照片尺寸
   - 选择预设尺寸：一寸、二寸、大二寸等
   - 或选择"自定义"输入具体宽高（毫米）
   - AI会根据尺寸自动调整构图比例

### 5. 等待处理完成
   - 系统显示处理进度
   - AI进行背景替换和美颜处理
   - 处理完成后显示结果

### 6. 下载证件照
   - 预览处理结果
   - 点击下载按钮保存高清图片
   - 支持多种格式导出

## 🎯 设计理念

ID Photo Studio Pro 的设计理念：

- **AI赋能专业** - 集成先进AI技术，提供专业级的照片处理
- **用户自主控制** - 用户可自定义AI参数，选择最适合的模型
- **极简高效** - 简洁的界面设计，专注核心功能
- **隐私保护** - 本地处理，照片不上传到第三方服务器
- **开放兼容** - 支持多种AI服务商，技术栈灵活可扩展

## 🤖 AI处理功能详解

### 智能背景替换
- **精确识别** - AI自动识别人物轮廓和原有背景
- **无缝融合** - 智能边缘处理，避免边缘瑕疵
- **颜色匹配** - 根据选择的背景色进行精确匹配
- **自定义支持** - 支持任意RGB颜色的自定义背景

### 专业美颜处理
- **皮肤平滑** - 自然地平滑皮肤纹理
- **眼睛增强** - 智能提亮和增强眼睛细节
- **光线调整** - 统一面部光线，营造专业灯光效果
- **瑕疵修复** - 自动修复头发、眼镜等细节瑕疵

### 支持的AI模型

#### 视觉语言模型
- **Qwen2-VL-72B-Instruct** - 推荐，通用型视觉处理
- **Qwen2-VL-7B-Instruct** - 轻量级，处理速度快

#### 图像生成模型
- **Stable Diffusion 3** - 专业图像生成和编辑
- **FLUX.1-schnell** - 高质量快速图像处理

### 尺寸适配系统
- **标准尺寸** - 支持国内常用证件照尺寸
- **智能构图** - AI自动调整人物位置和比例
- **高分辨率** - 输出300 DPI高质量图片
- **自定义尺寸** - 支持任意尺寸的精确输出

## 📝 开发说明

### 代码规范

- 使用 TypeScript 进行类型检查
- 遵循 ESLint 代码规范
- 使用 React Hooks 进行状态管理
- 响应式设计，支持移动端

### 浏览器兼容性

- Chrome/Edge 90+ (推荐)
- Firefox 88+
- Safari 14+
- 移动端浏览器（需支持摄像头API）

## 🎪 特色功能

### AI集成体验
- **实时处理** - 拍照后立即开始AI处理
- **智能反馈** - 显示详细的处理状态和进度
- **错误处理** - 友好的错误提示和解决建议
- **模型切换** - 支持多种AI模型的即时切换

### 现代化界面
- **毛玻璃设计** - backdrop-blur效果的现代UI
- **渐变背景** - 优雅的色彩过渡和视觉层次
- **流畅动画** - 悬停、点击和状态转换动画
- **响应式布局** - 完美适配各种屏幕尺寸

### 用户体验
- **隐私保护** - 图像处理在本地进行，保护用户隐私
- **一键操作** - 简化的操作流程，最少点击次数
- **实时预览** - 处理过程中显示实时状态
- **高质量输出** - 支持高清图片导出和多种格式

## 📄 许可证

本项目为私有项目，仅供学习和研究使用。

## 🔐 隐私与安全

- **本地处理** - 所有图像处理都在用户浏览器本地完成
- **API直连** - 直接调用硅基流动API，不经过第三方服务器
- **数据保护** - 不会存储或上传用户的照片数据
- **密钥安全** - API密钥仅保存在用户本地存储中

## 📋 API配置指南

### 支持的AI平台

#### 硅基流动 (SiliconFlow)
- **获取密钥**: 访问 [硅基流动控制台](https://cloud.siliconflow.cn/)
- **特点**: 专注于AI模型推理，性价比高
- **推荐模型**:
  - Qwen2-VL-72B-Instruct (日常使用)
  - Qwen2-VL-7B-Instruct (快速处理)
  - Stable Diffusion 3 (专业图像)

#### OpenRouter
- **获取密钥**: 访问 [OpenRouter控制台](https://openrouter.ai/)
- **特点**: 统一访问多个AI提供商，支持Claude、GPT-4等顶级模型
- **推荐模型**:
  - Claude 3 Haiku (推荐，性价比最佳)
  - Claude 3 Sonnet (高质量处理)
  - GPT-4o (通用型)

#### 通义千问 (Tongyi)
- **获取密钥**: 访问 [阿里云DashScope控制台](https://dashscope.aliyun.com/)
- **特点**: 阿里云推出的多模态大模型，具有优秀的中文理解能力
- **推荐模型**:
  - Qwen-Image-Edit-Plus (推荐)
- **部署说明**: 生产环境中可能遇到CORS问题，建议：
  - 使用开发环境进行测试
  - 或部署自己的后端代理服务器
  - 或修改API配置中的Base URL为您的代理服务器地址

### 平台对比

| 特性 | 硅基流动 | OpenRouter |
|------|----------|------------|
| 模型数量 | 专注中文模型 | 全球顶级模型 |
| 响应速度 | 快速 | 视模型而定 |
| 费用 | 较低 | 中等偏高 |
| 适用场景 | 中文用户 | 国际用户 |

### 配置步骤
1. 选择心仪的AI平台
2. 注册账户并获取API密钥
3. 在应用中选择对应平台
4. 输入API密钥并选择模型
5. 开始使用AI证件照处理功能

## 🚀 部署说明

### 开发环境
直接运行 `npm run dev` 即可，Vite会自动处理代理。

### 生产环境部署

由于CORS策略限制，通义千问在生产环境中可能无法直接调用。建议以下解决方案：

#### 方案1：使用代理服务器（推荐）
1. 安装代理服务器依赖：
   ```bash
   npm install
   ```

2. 启动代理服务器：
   ```bash
   npm run proxy
   ```
   代理服务器将在端口3001运行。

3. 部署时，将前端应用和代理服务器部署到同一域名下，或配置代理服务器处理CORS。

#### 方案2：修改API配置
在应用设置中，将通义千问的Base URL修改为您的代理服务器地址。

#### 方案3：后端集成
将AI处理逻辑移至后端服务器，避免前端CORS问题。

## 🙏 致谢

- 感谢 [硅基流动](https://siliconflow.cn/) 提供的优质AI推理服务
- 感谢 [OpenRouter](https://openrouter.ai/) 提供的统一AI接口
- 感谢 [通义千问](https://tongyi.aliyun.com/) 提供的强大多模态能力
- 使用 [React](https://reactjs.org/) 构建现代化界面
- 使用 [Tailwind CSS](https://tailwindcss.com/) 实现优雅样式
- 使用 [Lucide React](https://lucide.dev/) 提供精美图标
- 使用 [Vite](https://vitejs.dev/) 实现快速构建

---

**让AI技术为每个人提供专业的证件照服务！** 🤖📸✨
